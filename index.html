<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Functors</title>
<meta name="author" content="(Tim McIver)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/css/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/css/theme/moon.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Functors</h1><h2 class="author">Tim McIver</h2><p class="date">Created: 2019-10-02 Wed 10:47</p>
</section>

<section>
<section id="slide-sec-">
<h2 id="org8f9b5d3">APIs, Interfaces, Abstraction</h2>
<ul>
<li>Talk about how much of programming is coding to an interface as a lead-in to Functor being a high-level API.<br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-sec-">
<h2 id="org576f960">Iteration Over Lists, Arrays, Vectors, etc.</h2>
<div class="outline-text-2" id="text-org576f960">
</div>
</section>
<section id="slide-sec-">
<h3 id="org34cb254">One of the Most Common Operations in Programming</h3>

</section>
<section id="slide-sec-">
<h3 id="orgdb52d4a"></h3>
<p>
Contrived PHP example 1:<br />
Uppercase an array of strings<br />
</p>

<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">uppercaseWords</span>(<span style="color: #8cc4ff;">array</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span>) {
  <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">uppercased</span> = [];
  <span style="color: #b4fa70;">foreach</span> (<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span> <span style="color: #b4fa70;">as</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">word</span>) {
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">uppercased</span>[] = strtoupper(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">word</span>);
  }
  <span style="color: #b4fa70;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">uppercased</span>;
}
<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span> = [<span style="color: #e9b96e;">"functional"</span>, <span style="color: #e9b96e;">"programming"</span>, <span style="color: #e9b96e;">"rocks"</span>];
print_r(uppercaseWords(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span>));
</code></pre>
</div>
<pre class="example">
Array
(
    [0] =&gt; FUNCTIONAL
    [1] =&gt; PROGRAMMING
    [2] =&gt; ROCKS
)
</pre>

</section>
<section id="slide-sec-">
<h3 id="orgff0514a"></h3>
<p>
Contrived PHP example 2:<br />
Increment an array of ints:<br />
</p>

<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">incrementInts</span>(<span style="color: #8cc4ff;">array</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span>) {
  <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">incd</span> = [];
  <span style="color: #b4fa70;">foreach</span> (<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span> <span style="color: #b4fa70;">as</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">i</span>) {
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">incd</span>[] = <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">i</span> + 1;
  }
  <span style="color: #b4fa70;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">incd</span>;
}
<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span> = [1, 2, 3];
print_r(incrementInts(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span>));
</code></pre>
</div>
<pre class="example">
Array
(
    [0] =&gt; 2
    [1] =&gt; 3
    [2] =&gt; 4
)
</pre>

</section>
<section id="slide-sec-">
<h3 id="org7061ffa"></h3>
<p>
There's a lot in common in these examples.<br />
</p>
<div class="column" style="float:left; width: 50%">

<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">uppercaseWords</span>(<span style="color: #8cc4ff;">array</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span>) {
  <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">uppercased</span> = [];
  <span style="color: #b4fa70;">foreach</span> (<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span> <span style="color: #b4fa70;">as</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">word</span>) {
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">uppercased</span>[] = strtoupper(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">word</span>);
  }
  <span style="color: #b4fa70;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">uppercased</span>;
}
</code></pre>
</div>

</div>
<div class="column" style="float:right; width: 50%">

<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">incrementInts</span>(<span style="color: #8cc4ff;">array</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span>) {
  <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">incd</span> = [];
  <span style="color: #b4fa70;">foreach</span> (<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span> <span style="color: #b4fa70;">as</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">i</span>) {
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">incd</span>[] = <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">i</span> + 1;
  }
  <span style="color: #b4fa70;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">incd</span>;
}
</code></pre>
</div>

</div>

</section>
<section id="slide-sec-">
<h3 id="orgaba18c3"></h3>
<p>
Let's factor out what's common;<br />
parameterize what's different<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">applyFunctionForEach</span>(<span style="color: #8cc4ff;">array</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">arr</span>, <span style="color: #8cc4ff;">callable</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">f</span>) {
  <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">res</span> = [];
  <span style="color: #b4fa70;">foreach</span> (<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">arr</span> <span style="color: #b4fa70;">as</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">i</span>) {
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">res</span>[] = <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">f</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">i</span>);
  }
  <span style="color: #b4fa70;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">res</span>;
}
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="org616315d"></h3>
<p>
Then <code>uppercaseWords</code> becomes:<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">upperCase</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">s</span>) { <span style="color: #b4fa70;">return</span> strtoupper(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">s</span>); }
<span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">uppercaseWords</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span>) {
  <span style="color: #b4fa70;">return</span> applyFunctionForEach(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span>, <span style="color: #e9b96e;">'upperCase'</span>);
}
<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span> = [<span style="color: #e9b96e;">"functional"</span>, <span style="color: #e9b96e;">"programming"</span>, <span style="color: #e9b96e;">"rocks"</span>];
print_r(uppercaseWords(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">words</span>));
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="orga4373bd"></h3>
<p>
and <code>incrementInts</code> becomes:<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">inc</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">i</span>) { <span style="color: #b4fa70;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">i</span> + 1; }
<span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">incrementInts</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span>) {
  <span style="color: #b4fa70;">return</span> applyFunctionForEach(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span>, <span style="color: #e9b96e;">'inc'</span>);
}
<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span> = [1, 2, 3];
print_r(incrementInts(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">ints</span>));
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-sec-">
<h2 id="orgb9a2877">Iteration Over Trees</h2>
<div class="outline-text-2" id="text-orgb9a2877">
</div>
</section>
<section id="slide-sec-">
<h3 id="org025c96e">A Binary Tree</h3>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">interface</span> <span style="color: #8cc4ff;">BinaryTree</span> {}
<span style="color: #b4fa70;">class</span> <span style="color: #8cc4ff;">Node</span> <span style="color: #b4fa70;">implements</span> <span style="color: #8cc4ff;">BinaryTree</span> {
  <span style="color: #b4fa70;">private</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">left</span>;
  <span style="color: #b4fa70;">private</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">right</span>;
  <span style="color: #b4fa70;">private</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">val</span>;
  <span style="color: #b4fa70;">public</span> <span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">__construct</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">left</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">right</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">val</span>) {
    <span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #fcaf3e;">left</span> = <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">left</span>;
    <span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #fcaf3e;">right</span> = <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">right</span>;
    <span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #fcaf3e;">val</span> = <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">val</span>;
  }
  <span style="color: #73d216;">// </span><span style="color: #73d216;">getters elided</span>
}
<span style="color: #b4fa70;">class</span> <span style="color: #8cc4ff;">Leaf</span> <span style="color: #b4fa70;">implements</span> <span style="color: #8cc4ff;">BinaryTree</span> {}
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="org4df39ff">An Instance of a Binary Tree</h3>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">leaf</span> = <span style="color: #b4fa70;">new</span> <span style="color: #8cc4ff;">Leaf</span>();
<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">tree</span> = <span style="color: #b4fa70;">new</span> <span style="color: #8cc4ff;">Node</span>(
  <span style="color: #b4fa70;">new</span> <span style="color: #8cc4ff;">Node</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">leaf</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">leaf</span>, <span style="color: #e9b96e;">"functional"</span>),
  <span style="color: #b4fa70;">new</span> <span style="color: #8cc4ff;">Node</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">leaf</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">leaf</span>, <span style="color: #e9b96e;">"rocks"</span>),
  <span style="color: #e9b96e;">"programming"</span>
);
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="org0a2930c"></h3>
<p>
Let's try to uppercase the strings in a binary tree.<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">uppercaseBinaryTree</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">btree</span>) {
  <span style="color: #b4fa70;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">btree</span> <span style="color: #b4fa70;">instanceof</span> <span style="color: #8cc4ff;">Node</span>) {
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newLeft</span> = uppercaseBinaryTree(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">btree</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #eeeeec; background-color: #2e3436;">getLeftNode</span>());
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newRight</span> = uppercaseBinaryTree(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">btree</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #eeeeec; background-color: #2e3436;">getRightNode</span>());
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newStr</span> = strtoupper(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">btree</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #eeeeec; background-color: #2e3436;">getVal</span>());
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newNode</span> = <span style="color: #b4fa70;">new</span> <span style="color: #8cc4ff;">Node</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newLeft</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newRight</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newStr</span>);
  } <span style="color: #b4fa70;">else</span> {
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newNode</span> = <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">btree</span>;
  }
  <span style="color: #b4fa70;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newNode</span>;
}
print_r(uppercaseBinaryTree(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">tree</span>));
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="org4c8b4da"></h3>
<p>
But that's not very OO-ey. Instead let's define it as a method.<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">interface</span> <span style="color: #8cc4ff;">BinaryTree</span> {
  <span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">uppercase</span>();
}
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="orgfc98429"></h3>
<p>
And implement it:<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">class</span> <span style="color: #8cc4ff;">Node</span> <span style="color: #b4fa70;">implements</span> <span style="color: #8cc4ff;">BinaryTree</span> {
  <span style="color: #73d216;">// </span><span style="color: #73d216;">boring stuff elided</span>

  <span style="color: #b4fa70;">public</span> <span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">uppercase</span>() {
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newLeft</span> = <span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #fcaf3e;">left</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #eeeeec; background-color: #2e3436;">uppercase</span>();
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newRight</span> = <span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #fcaf3e;">right</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #eeeeec; background-color: #2e3436;">uppercase</span>();
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newStr</span> = strtoupper(<span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #fcaf3e;">val</span>);
    <span style="color: #b4fa70;">return</span> <span style="color: #b4fa70;">new</span> <span style="color: #8cc4ff;">Node</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newLeft</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newRight</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newStr</span>);
  }
}
<span style="color: #b4fa70;">class</span> <span style="color: #8cc4ff;">Leaf</span> <span style="color: #b4fa70;">implements</span> <span style="color: #8cc4ff;">BinaryTree</span> {
  <span style="color: #b4fa70;">public</span> <span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">uppercase</span>() {
    <span style="color: #b4fa70;">return</span> <span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span>;
  }
}
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="org9288580"></h3>
<p>
Then uppercasing a binary tree of strings becomes:<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">tree</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #eeeeec; background-color: #2e3436;">uppercase</span>();
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="org14edb36"></h3>
<p>
But the <code>uppercase</code> method is very specific.  We'd like to have something that allows us to perform <b>any</b> operation on the values inside a binary tree.<br />
Let's do for <code>BinaryTree</code> what we did for PHP arrays.<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">interface</span> <span style="color: #8cc4ff;">BinaryTree</span> {
  <span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">applyFunctionToEachNodeValue</span>(<span style="color: #8cc4ff;">callable</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">f</span>);
}
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="orga3bdcee"></h3>
<p>
And the implementation:<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">class</span> <span style="color: #8cc4ff;">Node</span> <span style="color: #b4fa70;">implements</span> <span style="color: #8cc4ff;">BinaryTree</span> {
  <span style="color: #73d216;">// </span><span style="color: #73d216;">boring stuff elided</span>

  <span style="color: #b4fa70;">public</span> <span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">applyFunctionToEachNodeValue</span>(<span style="color: #8cc4ff;">callable</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">f</span>) {
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newLeft</span> = <span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #fcaf3e;">left</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #eeeeec; background-color: #2e3436;">applyFunctionToEachNodeValue</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">f</span>);
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newRight</span> = <span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #fcaf3e;">right</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #eeeeec; background-color: #2e3436;">applyFunctionToEachNodeValue</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">f</span>);
    <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newStr</span> = <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">f</span>(<span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #fcaf3e;">val</span>);
    <span style="color: #b4fa70;">return</span> <span style="color: #b4fa70;">new</span> <span style="color: #8cc4ff;">Node</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newLeft</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newRight</span>, <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">newStr</span>);
  }
}
<span style="color: #b4fa70;">class</span> <span style="color: #8cc4ff;">Leaf</span> <span style="color: #b4fa70;">implements</span> <span style="color: #8cc4ff;">BinaryTree</span> {
  <span style="color: #b4fa70;">public</span> <span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">applyFunctionToEachNodeValue</span>(<span style="color: #8cc4ff;">callable</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">f</span>) {
    <span style="color: #b4fa70;">return</span> <span style="color: #e9b2e3;">$</span><span style="color: #e9b2e3;">this</span>;
  }
}
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="orgb576dca"></h3>
<p>
And now our <code>uppercaseBinaryTree</code> function can be written as<br />
</p>
<div class="org-src-container">

<pre  class="src src-php"><code trim><span style="color: #b4fa70;">function</span> <span style="color: #fce94f;">uppercaseBinaryTree</span>(<span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">btree</span>) {
  <span style="color: #b4fa70;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">$</span><span style="color: #fcaf3e;">btree</span><span style="color: #eeeeec; background-color: #2e3436;">-&gt;</span><span style="color: #eeeeec; background-color: #2e3436;">applyFunctionToEachNodeValue</span>(<span style="color: #e9b96e;">'strtoupper'</span>);
}
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-sec-">
<h2 id="org96b640e">Digression: The Option/Maybe Type</h2>
<div class="outline-text-2" id="text-org96b640e">
</div>
</section>
<section id="slide-sec-">
<h3 id="org01d3ea0">Null Is Terrible</h3>
<ul>
<li>The creator of the null reference (Tony Hoare) called it his "Billion-dollar mistake"<br /></li>
<li><a href="https://blog.overops.com/the-top-10-exceptions-types-in-production-java-applications-based-on-1b-events/">Largest source of exceptions in Java</a><br /></li>
<li>It adds this extra value to every type but does not honor any of their contracts.<br /></li>
<li>In C, two null values of any type compare as equal.<br /></li>

</ul>

</section>
<section id="slide-sec-">
<h3 id="orgd60c3aa">So What's the Alternative?</h3>
<p class="fragment (appear)">
An Option/Maybe Type!<br />
</p>
<p class="fragment (appear)">
(Type <b>constructor</b>, actually)<br />
</p>

</section>
<section id="slide-sec-">
<h3 id="orga059005"></h3>
<p>
In Haskell, defined as<br />
</p>
<div class="org-src-container">

<pre  class="src src-haskell"><code trim><span style="color: #b4fa70;">data</span> <span style="color: #8cc4ff;">Maybe</span> a <span style="color: #fcaf3e;">=</span> <span style="color: #8cc4ff;">Just</span> a
             <span style="color: #fcaf3e;">|</span> <span style="color: #8cc4ff;">Nothing</span>
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="orgdc4b2fe">Haskell Example 1: Uppercase a String</h3>
<p>
A variable of type <code>Maybe String</code>:<br />
</p>
<div class="org-src-container">

<pre  class="src src-haskell"><code trim><span style="color: #b4fa70;">import</span> <span style="color: #8cc4ff;">Data.Maybe</span>

<span style="color: #fce94f;">maybeAString</span> <span style="color: #fcaf3e;">::</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">String</span>
<span style="color: #fce94f;">maybeAString</span> <span style="color: #fcaf3e;">=</span> <span style="color: #8cc4ff;">Just</span> <span style="color: #e9b96e;">"Portland FP Meetup"</span>
</code></pre>
</div>

<div class="fragment (appear) group">
<p>
And here's a function to uppercase a <code>Maybe String</code>:<br />
</p>

<div class="org-src-container">

<pre  class="src src-haskell"><code trim><span style="color: #fce94f;">uppercaseMaybeString</span> <span style="color: #fcaf3e;">::</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">String</span> <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">String</span>
<span style="color: #fce94f;">uppercaseMaybeString</span> maybeString <span style="color: #fcaf3e;">=</span> <span style="color: #b4fa70;">case</span> maybeString <span style="color: #b4fa70;">of</span>
  <span style="color: #8cc4ff;">Just</span> s <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Just</span> (toUpper s)
  <span style="color: #8cc4ff;">Nothing</span> <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Nothing</span>
</code></pre>
</div>

</div>

<div class="org-src-container">

<pre  class="fragment (appear)"><code trim><span style="color: #fce94f;">uppercaseMaybeString</span> maybeAString
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="orgd2bac23">Haskell Example 2: Increment an Integer</h3>
<p>
A variable of type <code>Maybe Int</code>:<br />
</p>
<div class="org-src-container">

<pre  class="src src-haskell"><code trim><span style="color: #b4fa70;">import</span> <span style="color: #8cc4ff;">Data.Maybe</span>

<span style="color: #fce94f;">maybeAString</span> <span style="color: #fcaf3e;">::</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">Int</span>
<span style="color: #fce94f;">maybeAString</span> <span style="color: #fcaf3e;">=</span> <span style="color: #8cc4ff;">Just</span> 42
</code></pre>
</div>

<div class="fragment (appear) group">
<p>
And here's a function to increment the integer in a <code>Maybe Int</code>:<br />
</p>

<div class="org-src-container">

<pre  class="src src-haskell"><code trim><span style="color: #fce94f;">incrementMaybeInt</span> <span style="color: #fcaf3e;">::</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">Int</span> <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">Int</span>
<span style="color: #fce94f;">incrementMaybeInt</span> maybeInt <span style="color: #fcaf3e;">=</span> <span style="color: #b4fa70;">case</span> maybeInt <span style="color: #b4fa70;">of</span>
  <span style="color: #8cc4ff;">Just</span> i <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Just</span> (i <span style="color: #fcaf3e;">+</span> 1)
  <span style="color: #8cc4ff;">Nothing</span> <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Nothing</span>
</code></pre>
</div>

</div>

<div class="org-src-container">

<pre  class="fragment (appear)"><code trim><span style="color: #fce94f;">incrementMaybeInt</span> maybeInt
</code></pre>
</div>

</section>
<section id="slide-sec-">
<h3 id="orgb3104f1">That looked familiar . . .  again.</h3>
<div class="column" style="float:left; width: 50%">

<div class="org-src-container">

<pre  class="src src-haskell"><code trim><span style="color: #fce94f;">uppercaseMaybeString</span> <span style="color: #fcaf3e;">::</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">String</span> <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">String</span>
<span style="color: #fce94f;">uppercaseMaybeString</span> maybeString <span style="color: #fcaf3e;">=</span> <span style="color: #b4fa70;">case</span> maybeString <span style="color: #b4fa70;">of</span>
  <span style="color: #8cc4ff;">Just</span> s <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Just</span> (toUpper s)
  <span style="color: #8cc4ff;">Nothing</span> <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Nothing</span>
</code></pre>
</div>

</div>
<div class="column" style="float:right; width: 50%">

<div class="org-src-container">

<pre  class="src src-haskell"><code trim><span style="color: #fce94f;">incrementMaybeInt</span> <span style="color: #fcaf3e;">::</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">Int</span> <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Maybe</span> <span style="color: #8cc4ff;">Int</span>
<span style="color: #fce94f;">incrementMaybeInt</span> maybeInt <span style="color: #fcaf3e;">=</span> <span style="color: #b4fa70;">case</span> maybeInt <span style="color: #b4fa70;">of</span>
  <span style="color: #8cc4ff;">Just</span> i <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Just</span> (i <span style="color: #fcaf3e;">+</span> 1)
  <span style="color: #8cc4ff;">Nothing</span> <span style="color: #fcaf3e;">-&gt;</span> <span style="color: #8cc4ff;">Nothing</span>
</code></pre>
</div>

</div>

</section>
</section>
<section>
<section id="slide-sec-">
<h2 id="orga037265">Functor Laws</h2>

</section>
</section>
<section>
<section id="slide-sec-">
<h2 id="orgd65c3d6">Notes</h2>
<ul>
<li>Sets cannot have Functor instances. Why?<br /></li>

</ul>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
